{"current":"v127a-pre4","versions":{"v127a-pre4":{"version":"v127a-pre4","tag":["OFFLINE_DEV"],"date":"2020/12/02","changes":[{"text":"实现了“摘要图片”功能。","tag":["ADD"],"extra":[{"text":"RemotePlay 直接抓取酷我音乐的封面图片。"},{"text":"自建歌曲可通过资源管理器上传封面图片，或直接输入网址离线下载。"},{"text":"摘要图片在播放时会顺时针旋转。"},{"text":"不考虑为音频增加离线下载功能，因为文件过大，可能导致不稳定。"}]},{"text":"修复可能存在的问题：上传歌曲音频时，手速过快会导致上传无效。","tag":["FIX"]},{"text":"歌曲编辑页面现在使用 AJAX。","tag":["CHANGE"],"extra":[{"text":"为保持页面兼容性，若提交后歌曲标题和色彩中任意一个改变，将导致页面完全刷新。"}]},{"text":"将原有歌曲编辑器拆分为 资源管理器 和 歌曲编辑器。","tag":["CHANGE"],"extra":[{"text":"资源管理器用于上传音频和摘要图像。"},{"text":"歌曲管理器履行原有的编辑代码的职能。"}]},{"text":"修复 RemotePlay 歌曲可以编辑，导致错乱的问题。","tag":["FIX"]},{"text":"列举歌曲的地方现在同时标出其时长与音质。","tag":["ADD"],"extra":[{"text":"“半损”音质有《优秀》的视觉效果，可以提醒管理者尽快更换。"},{"text":"我们可能重新定义了“音质”。"}]},{"text":"修复编辑器保存扩展名不正确的文件且不提供删除选项的问题。","tag":["FIX"],"extra":[{"text":"现在扩展名不正确的文件会被驳回。"},{"text":"由于测试需要，zip 仍然被视为正确的扩展名和音频文件。"}]},{"text":"修复编译信息某些情况下漏掉换行符与导致下文全部加粗的问题。","tag":["FIX"]},{"text":"RemotePlay 现在从 Windows 频道获取音频数据。","tag":["CHANGE"],"extra":[{"text":"对使用没有影响。"}]},{"text":"RemotePlay 默认音质从 128kmp3 改为 192kmp3。","tag":["CHANGE"]},{"text":"用爬虫免费获取需要付费收听或付费下载的 RemotePlay 歌曲时，爬虫现在会告知用户情况。","tag":["CHANGE"],"extra":[{"text":"进行“白嫖”行为时，用户会被弹窗警告，但系统不阻止这种行为。"},{"text":"我劝这些白嫖怪耗子尾汁，好好反思。"}]},{"text":"修复可能存在的问题：歌单编辑器选择酷我音乐歌曲时，手速过快会导致直接打开播放页。","tag":["FIX"]},{"text":"修正 makerapp.js 中未翻译的 list.tag.rating。","tag":["FIX"]},{"text":"修正简体中文语言键 player.detail.origin “来源” => “来源：”。","tag":["FIX"]}]},"v127a-pre3":{"version":"v127a-pre3","tag":["OFFLINE_DEV","UNUSABLE"],"date":"2020/12/02","changes":[{"text":"修复歌曲编辑与权限修改页面返回链接不指向管理页面的问题。","tag":["FIX"]},{"text":"修复渐变色命令头不被编辑器识别的问题。","tag":["FIX"]}]},"v127a-pre2":{"version":"v127a-pre2","tag":["OFFLINE_DEV","UNUSABLE","EMERGENCY"],"date":"2020/12/01","changes":[{"text":"拆分了 configuration.php 并移动位置。","tag":["BREAKING"],"extra":[{"text":"相关配置现在位于 internal_config 文件夹中。"},{"text":"请认真将旧配置文件的内容抄写到新的中，然后删除旧文件。"}]},{"text":"修复语言无法切换的问题。","tag":["FIX"],"extra":[{"text":"见证出锅的时刻到了！真的出锅了！"}]}]},"v127a-pre1":{"version":"v127a-pre1","tag":["OFFLINE_DEV","UNUSABLE"],"date":"2020/12/01","changes":[{"text":"修复外界用户可以访问 changelog 转换程序的问题。","tag":["FIX"]},{"text":"添加应用前缀。","tag":["CHANGE","BREAKING"],"extra":[{"text":"见证出锅的时刻到了！"},{"text":"用于 localStorage 和 Cookie 键的区分，以允许多实例运行在同一域名下。"},{"text":"更新后需要在 configuration.php 中补加 APP_PREFIX，否则会引发错误，无法使用。"}]},{"text":"用户管理页面修改密码后不再能即时获得密码的哈希摘要。","tag":["BREAKING"],"extra":[{"text":"v127a 中将考虑移除哈希摘要的功能，因为新的哈希对比对密码不再有作用。"}]},{"text":"增强密码哈希机制。","tag":["CHANGE","BREAKING"],"extra":[{"text":"新的密码哈希使用 64 位(ASCII)盐、sha-256 和至少 11 位(ASCII)的密钥。"},{"text":"密码哈希格式仍为 md5 的用户在更新后被强制登出。"},{"text":"md5 用户输入密码登录后，哈希方式更新。"},{"text":"更新后需要在 configuration.php 中补加 PASS_KEY，否则会引发错误，无法使用。"}]},{"text":"增加多语言支持。","tag":["ADD"],"extra":[{"text":"与此同时修正了大多数不合适、不得体的语句。"},{"text":"目前支持简体中文与英文。支持列表暂时为硬编码。"},{"text":"在 data/i18n 中创建语言文件（如 en_us.lang）并加入语言键，可以覆盖默认翻译。为了可维护性，切勿在 lib/i18n/lang 中加入语言键。"},{"text":"将考虑移除 configuration.php 中的大部分选项，用语言键代替。"},{"text":"生成的 Word 文档不支持多语言，其语言为简体中文。"}]},{"text":"移除与“离线播放器”相关的残余代码。","tag":["CLEAN"]},{"text":"移除了用户设置与酷我音乐搜索的提示。","tag":["REMOVE"]},{"text":"修复爬虫《错误识别》今日推荐歌单的问题。","tag":["FIX"]},{"text":"修复不可编辑的编辑框视觉效果过弱的问题。","tag":["FIX"]},{"text":"微调编辑框尺寸以适应英文的外观。","tag":["CHANGE"]},{"text":"修复了部分页面没有下边距（导致向下滚动不能到位）的问题。","tag":["FIX"],"extra":[{"text":"成因暂不明确。使用临时解决方案处理。"}]},{"text":"修复临时歌单不能转存为 csv 格式的问题。","tag":["FIX"]},{"text":"“关于”窗口不再能通过 data/bc/about.php 自定义。","tag":["CHANGE","BREAKING"],"extra":[{"text":"你可以在 data/i18n 中添加语言键 ui.about.tip 对“关于”窗口内容进行覆盖。"}]},{"text":"修复 RemotePlay 加载无歌词歌曲不能一次性成功的问题。","tag":["FIX"]},{"text":"修复“全部播放”功能无法工作的问题。","tag":["FIX"],"extra":[{"text":"该功能未声明自己生成的歌单是旧的 JSON 格式。"},{"text":"目前其生成的歌单确实仍然是旧的 JSON 格式。"}]},{"text":"新增 debug 配置项","tag":["ADD","CHANGE"],"extra":[{"text":"关闭时，系统将避免不必要的 json 格式化并屏蔽所有内部报错。"},{"text":"开启时，内部报错方式与先前版本相同，且绝大多数 json 格式化输出。"}]},{"text":"app 代码文件夹更名为 lib。","tag":["CLEAN"],"extra":[{"text":"手动更新时，应主动删除 app 文件夹以防冗余代码。"}]},{"text":"干掉所有静态的 cssWithPHP 结构，将其转化为 CSS。","tag":["CLEAN"],"extra":[{"text":"着色剂仍然使用动态方式输出，但集成至主程序。例如 dynamic/css/common/main-colored.css?v=127a-pre1-dev1&A=X4CAF50...。"}]},{"text":"除 cdp-page 和 functions 外的公用 JS 文件全部移至 static/lib 下。","tag":["CLEAN"]},{"text":"干掉 jsWithPHP 结构，将其转化为 JavaScript。","tag":["CLEAN"],"extra":[{"text":"现在所有应用型 js 文件开头字符串标记均为 “mod <模块名称>”。"}]},{"text":"移除未使用的 app/router/TopLevelRouter-old.class.php。","tag":["CLEAN"]},{"text":"彻底移除 RojExplorer 歌单云保存的功能。","tag":["CLEAN","BREAKING"],"extra":[{"text":"原有歌单仍然能打开。打开的歌单将被作为临时歌单处理（不显示歌单名称），且不能再修改并快速保存。"}]},{"text":"添加 async-worker 以为“可编程化规则”做准备。","tag":["ADD","EXPERIMENTAL"],"extra":[{"text":"将在 Web Worker 中直接包装并运行用户定义的 JS 代码。"},{"text":"用户定义的代码无法使用 window, document 等组件，应当无法获取 cookie。"},{"text":"Web Worker 内的环境对所有 WebAPI（包括 Worker 本身）进行了阉割。Worker 应当不能进行网络请求。","extra":[{"text":"WebAPI 列表是硬编码的（来自 MDN），可能随时间推移出现问题。"}]},{"text":"可能有严重安全问题。"},{"text":"static/js/common 中有一个未使用的 sandboxed_worker-0.1.1.js 可以作为备选方案。","extra":[{"text":"该组件安全性较高。"},{"text":"致命缺陷：沙箱内代码死循环会导致顶层页面卡死。"},{"text":"没有按照要求封装，不能被直接使用。"}]}]},{"text":"删除 toxic-dialog。该组件已经完全弃用。","tag":["REMOVE"]},{"text":"模态窗口的 token 现在是 40 位的大小写字母和数字。","tag":["CHANGE"]}]},"v126d":{"version":"v126d","tag":["OFFLINE_DEV","UNUSABLE"],"date":"2020/10/18","changes":[{"text":"再次公开发布。","tag":["PUBLISH"]},{"text":"修改版本号为 v126d（正式版）。","tag":["PUBLISH"]},{"text":"歌词代码页面现在有快速导航。","tag":["CHANGE"]},{"text":"版本历史与歌词代码页面的翻页组件不再随页面滚动而移动。","tag":["CHANGE"]},{"text":"调整版本历史页面布局。","tag":["CHANGE"]},{"text":"版本历史页面现在正序书写每个版本的的更改。","tag":["CHANGE"]},{"text":"正式版（2020/10/18）","tag":["MILESTONE"]},{"text":"现在更新日志放置到 changelog 文件夹下。","tag":["CHANGE","CLEAN"],"extra":[{"text":"该文件夹被删除时，默认的“关于”窗口中不再含有指向版本历史的链接。"},{"text":"若 changelog/versions.json 健在，版本历史页面会以翻页方式呈现所有更新日志。"}]},{"text":"人声倒放现在标记为单边箭头，且箭头线更靠近文字。","tag":["CHANGE"]},{"text":"数据文件夹不存在时，程序将直接终止而非报错。","tag":["CHANGE"]},{"text":"v126d-pre8（2020/10/17）","tag":["MILESTONE"]},{"text":"修复RemotePlay歌词中 &lt; &gt; &amp; 被编码的问题（现在不需要）。","tag":["FIX"]},{"text":"修改可打印歌词的格式","tag":["CHANGE"],"extra":[{"text":"CIP 文字减小至 24（小四）"},{"text":"歌词、信息块文字减小至 22（11）"},{"text":"页面边距倍增，以适应打印并装订的需要。"}]},{"text":"修复 lrc 文件中 &lt; &gt; &amp; 被二次编码的问题。","tag":["FIX"]},{"text":"修复了可能存在的问题：单曲歌词本输出中掺杂有报错导致无法打开。","tag":["FIX"]},{"text":"修复编辑器“补加L开头”功能不认识 G1 和 G2 命令的问题。","tag":["FIX"]},{"text":"修改编辑器上标签的描述文字。","tag":["CHANGE"]},{"text":"现在歌词文档支持角色标签与其他格式标签互相嵌套。","tag":["CLEAN","CHANGE"],"extra":[{"text":"总体性能略有改善（我  信  你  个  鬼）"}]},{"text":"添加用于表示“人声倒放”的符号 [R]","tag":["ADD"],"extra":[{"text":"在歌曲 [K_16644260]红昭愿 的歌词中应当被用到。"},{"text":"规范：若对一段文字的整体添加该符号，则这段文字不应该逆向书写。该符号包含文字逆向发音的含义。"},{"text":"文本上方以注音方式显示指向左侧的长箭头。"},{"text":"不应该嵌套自身。"},{"text":"在可打印文档上表达为尖括号且可以与其他格式嵌套。"},{"text":"在 lrc 文件中表达为尖括号。"}]},{"text":"v126d-pre7（2020/10/16）","tag":["MILESTONE"]},{"text":"修复单曲 edit 和 permission 页面无法显示的问题。","tag":["FIX"]},{"text":"v126d-pre6（2020/10/15）","tag":["MILESTONE"]},{"text":"重写 Router 类","tag":["CLEAN","FIX"],"extra":[{"text":"404 和 401 总是伴随正确的 HTTP 代码抛出。"},{"text":"404 和 401 在非包装页面（非顶层页面）不再以网页形式呈现。"},{"text":"“权限校验错误”现在伴随“Illegal Data”状态以404页面形式呈现。"},{"text":"整体性能略有改善。"}]},{"text":"迭代哈希随机数的代码文件从 hashed_rand.function.php 改为 hashed_rand.class.php。","tag":["CLEAN"]},{"text":"接收相对URL的GET键名从 music 改为 _lnk。","tag":["CHANGE","BREAKING"],"extra":[{"text":"更新后必须相应修改 .htaccess 才能访问除主页外的其他网址。"}]},{"text":"若 configuration.php 中未定义渐变色，则自动定义为空值。","tag":["FIX"],"extra":[{"text":"从 v126d-pre1 或更早版本直接更新不再导致错误。"}]},{"text":"若歌词文件主题色未定义而定义了渐变色，则主题色为 G1 色而非默认值。","tag":["CHANGE"],"extra":[{"text":"移除了新文件模板中的 A 命令。"}]},{"text":"v126d-pre5（2020/10/12）","tag":["MILESTONE"]},{"text":"修复播放等按钮的色彩问题。","tag":["FIX"],"extra":[{"text":"有渐变色的情况下，这些按钮现在正常状态下为 G2 色，鼠标移入时为 G1 色。"},{"text":"颜色转换时间现在是 0.25s。"}]},{"text":"v126d-pre4（2020/10/10）","tag":["MILESTONE"]},{"text":"修复缓存与“禁用主题色变换”之间的问题。","tag":["FIX"],"extra":[{"text":"“禁用主题色变换”不再影响歌词文件编译结果。"}]},{"text":"v126d-pre3（2020/10/10）","tag":["MILESTONE"]},{"text":"系统现在首选采用 csv 格式存储歌单。","tag":["CHANGE"],"extra":[{"text":"文件大小大幅缩小。"},{"text":"csv 与 json 的文件大小限制相同，因此 csv 可以存储更多歌曲（若评分为四位整数，则存储数量大约从 1039 提升至 2690）。"},{"text":"歌单构造器上点击“保存”会以 csv 格式保存且别无选择。"},{"text":"系统将尝试提醒用户重新保存其原有歌单，使其转换为 csv 格式。"},{"text":"导入的 json 歌单仍以 json 方式存储。"},{"text":"以 csv 存储的歌单在导出时会询问用户导出的格式。"},{"text":"导出现在以窗口方式展现，而不是新标签页。"}]},{"text":"歌单构造器导入数据的输入框改为多行代码输入框。","tag":["CHANGE"]},{"text":"“以键入方式确认危险操作”的提示框现在允许其文字被选中。","tag":["CHANGE"]},{"text":"现在动态的“静态文件”允许浏览器缓存15天。","tag":["FIX"]},{"text":"RemotePlay 歌曲现在具有随机生成（以歌曲、歌手名为种子）的主题色和渐变色。","tag":["CHANGE"]},{"text":"修复缓存导致 RemotePlay 出错的问题。","tag":["FIX"]},{"text":"修复 lrc 歌词切入时间为 0 的一句被删除的问题。","tag":["FIX"]},{"text":"添加渐变色的定义方式。","tag":["ADD","BREAKING"],"extra":[{"text":"必须手动修改 configuration.php，使得更新后不会发生错误。"},{"text":"configuration.php 中以常量定义形式存在，分别为 GC_COLOR_1 和 GC_COLOR_2。"},{"text":"歌词文件的定义中在 [Meta] 段下，分别为 G1 和 G2。"},{"text":"仅应用于顶栏以及歌单构造器的聚焦高亮。其他组件仍然使用默认主题色（MAIN_COLOR 或 A）"}]},{"text":"v126d-pre2（2020/10/10）","tag":["MILESTONE"]},{"text":"现在PC端上歌单构造器的歌曲列表宽度限制为 900px。","tag":["CHANGE"]},{"text":"歌单构造器操作高亮的背景色现在根据页面主题色着色。","tag":["CHANGE"],"extra":[{"text":"键盘焦点不在歌曲列表上时，显示为原来的灰色。"}]},{"text":"现在歌单构造器操作高亮的背景色会透过聚焦的背景色显示出来。","tag":["CHANGE"]},{"text":"歌单编辑选择歌曲现在需要双击。","tag":["CHANGE","BREAKING"],"extra":[{"text":"单击会聚焦到该歌曲。"}]},{"text":"添加了对转换后歌词进行文件系统缓存的功能（默认不开启）。","tag":["ADD"],"extra":[{"text":"将大约 120 首歌曲列表的处理时间从 1.5s 优化至大约 0.2s（线下开发环境）。"},{"text":"详见 configuration.php。"},{"text":"每个歌曲将额外消耗约 3~6 KB 的磁盘空间。"}]},{"text":"非调试模式下不再用格式化方式输出歌词JSON。","tag":["FIX"]},{"text":"表面上移除 RojExplorer 歌单云保存功能。","tag":["REMOVE"],"extra":[{"text":"新的浏览器机制已导致其出现问题。"},{"text":"原来已保存的歌单仍然可以《正常工作》，但是新的歌单不能再转换为此模式。"},{"text":"《修复》了反复切换状态导致折叠按钮紊乱的问题。"}]},{"text":"v126d-pre1（2020/10/09）","tag":["MILESTONE"]}]},"v126c":{"version":"v126c","tag":["OFFLINE_DEV"],"date":"2020/10/08","changes":[{"text":"歌单构造器现在支持键盘操作。","tag":["ADD"],"extra":[{"text":"可用按键有 WS、ED、A、R、ZXCV"}]},{"text":"修复表示加载状态的模态窗口可以用 ESC 键关闭的问题。","tag":["FIX"],"extra":[{"text":"这是前端库的问题，难以直接修复。此处使用抛出错误的方法阻止窗口关闭。"}]}]},"v126b":{"version":"v126b","tag":["STABLE","OFFLINE_DEV"],"featured":"大清理与修复","date":"2020/10/08","changes":[{"text":"移除了单击主页标题 6 次进入管理区的功能。","tag":["FIX"],"extra":[{"text":"管理区早已和用户系统合并。"}]},{"text":"“查看歌词配置”页面现在会输出两份标准歌词文件(lrc)以供通用的音乐播放软件或MP3设备使用。","tag":["ADD"]},{"text":"歌词文件中不再允许直接使用 HTML。它们会被转化为文本输出。","tag":["CHANGE","BREAKING"]},{"text":"移除播放队列。","tag":["FIX"],"extra":[{"text":"未来仍然计划添加该特性。"}]},{"text":"由于模态窗口的引入，用户管理页面现在可以快速地修改用户的密码。","tag":["CHANGE"]},{"text":"顶栏现在显示用户名。","tag":["CHANGE"]},{"text":"需要多次确认的删除用户、删除歌单、导入歌单覆盖等危险行为现在以复述名称的方式来确认。","tag":["CHANGE"]},{"text":"所有 alert、alert2、prompt、confirm 相关内容均用模态窗口重写。","tag":["CHANGE"],"extra":[{"text":"有大量使用 async 与 await，使得老旧的浏览器不再受支持。"},{"text":"AmazeUI 的模态窗口类重新封装后被用于这些地方。重新封装后的模态窗口允许了键盘对窗口快捷的操作。"}]},{"text":"角色颜色标签在激活时现在被着色。","tag":["CHANGE"]},{"text":"基本修复歌词缩放尺度较大造成的问题。","tag":["FIX"]},{"text":"单击歌词行跳转的功能现在仅在点中文字区域时有效。","tag":["CHANGE"]},{"text":"修改选中文字的样式。","tag":["CHANGE"]},{"text":"修复选中的文字无底色的问题。","tag":["FIX"]},{"text":"将 css 的着色部分（主题色变换部分，称为“着色剂”）从基础 css 中独立出来，以减小网络流量。","tag":["CLEAN"],"extra":[{"text":"例如：从 main.css.php 中独立出来的 css 为 main-colored.css.php。"}]},{"text":"将 css 和 js 装入对应模块的文件夹。","tag":["CLEAN"]},{"text":"重构 function 中大多数函数的名称。","tag":["CLEAN"]},{"text":"歌单构造器上的保存方式窗口默认折叠。","tag":["CHANGE"]},{"text":"为歌单构造器添加导入导出功能。","tag":["ADD"]},{"text":"歌单构造器页面不再有固定刻（改进移动端体验）。","tag":["CHANGE"]},{"text":"歌单构造器页面现在显示歌单文件的实际大小。","tag":["FIX"]},{"text":"后端存储的用户歌单不再格式化。","tag":["FIX"]},{"text":"修复播放界面在较快网络下歌词初始位置不正确的问题。","tag":["FIX"]},{"text":"为歌词文件转换添加缓存机制。含有歌曲列表的页面加载时间大约变为原来的 1/6。","tag":["FIX"]},{"text":"歌单切换约束增加了一个限制条件。","tag":["CHANGE"]},{"text":"修复歌单构造器中的项目在添加后有时失去 ID 标签和评分标签点击事件的漏洞。","tag":["FIX"],"extra":[{"text":"这允许用户在对歌单进行删改后无需刷新就能毫无障碍地继续修改评分和 ID。"}]},{"text":"配置文件改名为 configuration.php。","tag":["CHANGE","BREAKING"]},{"text":"允许软件在客户端无互联网的情况下完全正常运行（RemotePlay除外）。","tag":["FIX"]},{"text":"酷我音乐不再抓取歌曲主页，提高效率。","tag":["FIX"]},{"text":"酷我音乐爬虫不再认为标题为空的抓取结果是合法的。","tag":["FIX"]},{"text":"将酷我音乐 RemotePlay 编号的开头改为 \\'K_\\'","tag":["CHANGE","BREAKING"],"extra":[{"text":"\\'AK_\\' 开头的编号正常工作。"},{"text":"歌单不再允许有 \\'AK_\\' 开头的编号。"}]},{"text":"允许查看无音频歌曲的源代码","tag":["CHANGE"]},{"text":"为编译器添加部分前向兼容特性","tag":["CHANGE"],"extra":[{"text":"修改行注释机制。","extra":[{"text":"位于行首的“//”或“##”之后表示注释，直到此行结束。"},{"text":"位于行中间的“##”之后表示注释，直到此行结束。但是如果“##”后面没有任何内容，则不认为这是注释。"}]},{"text":"位于行首的 \\'!\\' 之后也被视为注释。","extra":[{"text":"即将引入新文件标准要求文件第一行标注其版本号（如“!dataver 201803”）。"}]}]},{"text":"拆分了字体设置。","tag":["CHANGE","BREAKING"],"extra":[{"text":"设置页的提示未撰写。"},{"text":"“名称字体”“代码字体”暂时无效。"}]},{"text":"对用户设置字体的注入漏洞使用了临时解决方案。","tag":["FIX","BREAKING"],"extra":[{"text":"如果设置项包含 !;<> 等字符之一，服务端接收保存设置请求时将阻止对该项进行修改。"},{"text":"如果已有设置项包含不可接受的字符，系统会将其视为默认值。"},{"text":"该特性未经过测试。"}]},{"text":"用户设置中填写字体的项目现在不会自动加上引号，以允许正确地设置多个字体。","tag":["CHANGE","BREAKING"]},{"text":"将动态布局的延时调整为 1500ms。","tag":["CHANGE"],"extra":[{"text":"动态布局在加载之初会先执行一次。"}]},{"text":"修复了大空格字体导致播放页布局错误的问题。","tag":["FIX"],"extra":[{"text":"修改了进度条动态布局数值。"}]},{"text":"撤销 Gayhub 上的发布（重写后重新发布）","tag":["PUBLISH","BREAKING"]},{"text":"对“新版样式”做了临终前最后的修改。","tag":["CHANGE"],"extra":[{"text":"大大改进了移动端性能。"},{"text":"移除大部分动画。"}]},{"text":"移除了右侧滑入菜单的动画，并且防止其在隐藏时渲染。","tag":["FIX"]},{"text":"优化了服务端性能。含有歌曲列表的页面加载时间大约变为原来的 1/6。","tag":["FIX"]},{"text":"查看歌词源代码现在会根据内容类型分页，并且包含了更多内容。","tag":["CHANGE"]},{"text":"现在编译歌词文件如果出现错误会给出错误位置。如果有不符合规范的写法会给出警告。","tag":["ADD"],"extra":[{"text":"酷我音乐RemotePlay生成的歌词文件不会被此忽略，并且通常会触发警告。"}]},{"text":"拆分 tpl.function.php 并补充注释。","tag":["CLEAN"],"extra":[{"text":"这原来是一锅大杂烩"}]},{"text":"将超级管理员变为一种用户类型。","tag":["CHANGE"],"extra":[{"text":"这移除了超级管理员的登入登出页面","extra":[{"text":"这废除了超级管理员明文密码的使用"},{"text":"更新至此版本的用户需手动修改数据文件才能重新获得超级管理员访问权。全新安装不存在该问题。"}]}]},{"text":"现在使用 [Comment] 插入注释不再会导致系统错误。","tag":["FIX"]},{"text":"修改默认字体 Noto Sans SC 的 webfont 链接至 jsDelivr","tag":["FIX"],"extra":[{"text":"jsDelivr 中的webfont样式与字体文件从 fonts.googleapis.com 抓取。","extra":[{"text":"这用于解决 fonts.googleapis.com 在中国部分营业商/地区无法正常加载的问题。"}]}]},{"text":"角色标签扩展至 1-7，并在编辑界面有了正确的标题。","tag":["CHANGE"],"extra":[{"text":"这允许在至多有3个歌手的歌曲中正确地区分演唱角色。","extra":[{"text":"参见演示站中 0403 号歌曲。"}]}]},{"text":"修复点击歌词行有时跳到上一句歌词的漏洞。","tag":["FIX"],"extra":[{"text":"现在点击歌词行不再调到歌词行对应切入时间，而是比切入时间晚 0.001s 的时间。"}]},{"text":"将播放列表移到右侧滑入菜单中以改进用户体验。","tag":["CHANGE"],"extra":[{"text":"右侧菜单在隐藏时并没有停止渲染，该问题导致移动端性能极差。"}]}]},"v126a":{"version":"v126a","tag":[],"date":"2019/12/29","changes":[{"text":"添加直接浏览酷我今日推荐歌单的功能。","tag":["ADD"]}]},"v125e":{"version":"v125e","tag":[],"date":"2019/12/21","changes":[{"text":"修改新样式","tag":["CHANGE"]}]},"v125d":{"version":"v125d","tag":[],"featured":"新外观","date":"2019/12/21","changes":[{"text":"编辑器的时值插入改为键盘操作（Enter或空格插入时值，斜杠键插入短横线）","tag":["CHANGE","BREAKING"]},{"text":"修改右上角图标排列。","tag":["CHANGE"]},{"text":"添加底层样式","tag":["FIX"],"extra":[{"text":"如果切换歌曲时样式表加载失败，外观将回落至以黑色为主题色的样式。"},{"text":"该漏洞长期存在，但是之前未考虑到好的修复方式。"},{"text":"此前，如果切换歌曲时样式表加载失败，页面会发生错乱，这迫使用户刷新页面。"}]},{"text":"修复音频加载成功之前无法切换下一首歌曲、红绿状态不显示的问题。","tag":["FIX"],"extra":[{"text":"该漏洞长期存在，但是懒得修复。"}]},{"text":"添加新样式（外观）。","tag":["ADD"],"extra":[{"text":"默认启用，可以在用户设置中关闭。"}]}]},"v125c":{"version":"v125c","tag":[],"date":"2019/12/08","changes":[{"text":"修复编辑错误","tag":["FIX"]},{"text":"修复歌单保存 CSRF 误判的缺陷。","tag":["FIX"],"extra":[{"text":"该漏洞长期存在，只不过其他情况下发生概率较低。"}]},{"text":"添加内置保存歌单、歌词本自定义编号的功能。","tag":["ADD"],"extra":[{"text":"云保存的歌单编辑界面下，点击歌曲的 ID 标签可以修改 ID。"},{"text":"被修改过的 ID 标签显示为蓝色。"},{"text":"播放界面上的当前歌曲 ID 标签仍然使用未经修改的。这是有意设计的。"},{"text":"歌单的存储能力大致下降到 1039。"}]}]},"v125b":{"version":"v125b","tag":["UNUSABLE"],"date":"2019/11/15","changes":[{"text":"修复在线保存歌单以及用户管理接口处出现的CSRF漏洞。","tag":["FIX"],"extra":[{"text":"这（个漏洞）允许黑客通过诱导用户访问恶意网页的方式更改/删除他们的歌单。"},{"text":"如果被攻击的用户登录了超级管理员，则黑客可以通过相同方式来进行用户管理操作。"}]}]},"v125a":{"version":"v125a","tag":["UNUSABLE"],"featured":"用户系统、强大的歌单","date":"2019/11/15","changes":[{"text":"加入用户系统，仅为了允许用户在软件中存储歌单","tag":["ADD"],"extra":[{"text":"旧版歌单仍然能使用，但是不具有任何新特性。"},{"text":"歌单的长度限制从 2048 改为 30400，这允许约2200首歌曲。"},{"text":"歌单在（其他设备）修改后只需刷新就能应用更改。"},{"text":"歌单在修改后网址不变。"},{"text":"歌单的条目不再依赖于网址，网址变得短而简单。"},{"text":"歌单存储格式变为 JSON。"},{"text":"旧版歌单可以一键转换为在线存储的版本。"},{"text":"新版歌单可以一键另存为旧版，但是将会丢失一切新特性，并且过大的歌单在转换时会发生错误。"},{"text":"歌单现在允许为每首歌曲设置评分。下一首歌的评分必须和当前评分之间满足一个给定的要求（这有时可以用来渐进式打破单曲循环）。"},{"text":"超级管理员权限仍然独立于用户系统存在。"},{"text":"超级管理员可以封禁、登录和删除用户，也可以修改其用户名和密码。"}]}]},"v123e":{"version":"v123e","tag":[],"date":"2019/11/13","changes":[{"text":"将歌曲详细信息改为彩色标签","tag":["CHANGE"],"extra":[{"text":"这是为了用户系统中用户标签的功能，尽管相关功能从未实现。"}]}]},"v123d":{"version":"v123d","tag":[],"date":"2019/11/03","changes":[{"text":"修复酷我音乐搜索无法进行的问题","tag":["FIX"],"extra":[{"text":"这是因为酷我又对API进行了修改"}]}]},"v123c":{"version":"v123c","tag":[],"date":"2019/10/26","changes":[{"text":"修复酷我音乐搜索无法进行的问题","tag":["FIX"],"extra":[{"text":"这是因为酷我对API的修改"}]}]},"v123b":{"version":"v123b","tag":[],"date":"2019/09/19","changes":[{"text":"修复酷我音乐爬虫不能抓取无歌词歌曲的问题。","tag":["FIX"]}]},"v123a":{"version":"v123a","tag":[],"featured":"全新排版","date":"2019/09/14","changes":[{"text":"添加歌词缩放，适合高分屏幕以及大屏幕演示使用（实验性功能，仅用于电脑版）","tag":["ADD"]},{"text":"添加歌曲档案图片功能","tag":["ADD"],"extra":[{"text":"这个特性从未实现。实际上档案图片不能被显示。"}]},{"text":"修改电脑版播放器界面风格（优化布局以减少空白区域）","tag":["CHANGE"]}]},"v122g":{"version":"v122g","tag":[],"featured":"Firefox兼容","date":"2019/08/30","changes":[{"text":"修正Firefox的适配问题。","tag":["FIX"]}]},"v122f":{"version":"v122f","tag":[],"date":"2019/08/28","changes":[{"text":"修正歌词自动折行间距过小的问题","tag":["FIX"]},{"text":"随机预读歌曲元数据的任务同时执行数不再会大于3。","tag":["CHANGE"],"extra":[{"text":"浏览器对同一个域名的连接数量是有限制的。"},{"text":"这个修改使得歌曲音频加载不再因为随机预读任务而长时滞后。"}]},{"text":"添加歌词编译器的错误处理（防止大量报错损坏系统）","tag":["FIX"],"extra":[{"text":"PHP将强制捕获歌词配置编译器产生的代码错误并将其忽略。"}]}]},"v122e":{"version":"v122e","tag":[],"date":"2019/08/19","changes":[{"text":"现在每 4 秒会随机预读歌曲的元数据","tag":["CHANGE"],"extra":[{"text":"这可以在较短时间内读完整个歌单的元数据，因此一段时间后歌单中的歌曲就可以立即切换。"},{"text":"系统最多进行64次预读尝试。每次随机指定一个歌曲，如果已经预读，那么尝试失败；如果没有预读，那么最多尝试预读3次，无论成功还是失败均不再进行之后的尝试。"}]},{"text":"RemotePlay中的音频网址在形式上变得固定。","tag":["CHANGE"],"extra":[{"text":"使用307重定向指向真实网址。"},{"text":"因此预读数据不再在使用后被清除。"},{"text":"这导致移动端下有时音频仅在亮屏时才能加载。"}]}]},"v122d":{"version":"v122d","tag":[],"featured":"更低的网络故障概率","date":"2019/08/19","changes":[{"text":"修复一些 小  问  题","tag":["FIX"]},{"text":"歌单现在会预测下一个切换到的歌曲，并预先读取其元数据。","tag":["ADD"],"extra":[{"text":"元数据预读如果发生错误，则会重试，直到失败5次为止。"},{"text":"预读的元数据存储与内存，并且被使用过后会立刻清除。"},{"text":"这可以大大减少歌曲切换时因元数据加载失败造成卡死的概率。"},{"text":"音频文件仍然在切换到该歌曲时才开始加载。"}]}]},"v122c":{"version":"v122c","tag":[],"changes":[{"text":"修复歌词本因为权限校验失败不显示爬虫歌曲的问题","tag":["FIX"]},{"text":"添加“相对音量调节”功能","tag":["ADD"]}]},"v122b":{"version":"v122b","tag":[],"changes":[{"text":"添加歌曲取代功能（用此可以节省服务器空间）","tag":["ADD"],"extra":[{"text":"允许设置歌曲的音频用另一个歌曲取代。通过设置“另一个歌曲”为来自酷我音乐的内容，可以避免上传音频。"},{"text":"由于酷我音乐上歌曲删除与变动比较频繁，不建议使用这个功能，因为这可能造成音频丢失。除非服务器存储空间短缺或服务器网速严重有问题。"},{"text":"如果因为网速问题使用这个功能，建议对相关歌曲音频做好备份，以方便在音频丢失时将其还原。"}]},{"text":"修复单曲歌词文档因为“权限校验错误”拒绝被下载的问题","tag":["FIX"]}]},"v122a":{"version":"v122a","tag":[],"changes":[{"text":"歌曲、歌手等现在会以多行样式在各种列表中显示","tag":["CHANGE"]}]},"v121d":{"version":"v121d","tag":[],"changes":[{"text":"修复一些 小  问  题","tag":["FIX"]}]},"v121c":{"version":"v121c","tag":[],"changes":[{"text":"添加间奏行（要求段标为\\'--\\'）","tag":["ADD"],"extra":[{"text":"间奏会显示为十个圆圈，从左侧开始涂黑。涂黑个数表示间奏剩余秒数。"},{"text":"即使间奏不足10秒也有十个圆圈。"}]}]},"v120c":{"version":"v120c","tag":[],"changes":[{"text":"改进网盘保存歌单的功能。","tag":["FIX"]}]},"v120b":{"version":"v120b","tag":[],"changes":[{"text":"增强了酷我音乐爬虫的搜索功能。","tag":["ADD"]}]},"v120a":{"version":"v120a","tag":[],"featured":"在线存储歌单","changes":[{"text":"改进歌词本生成器。","tag":["FIX"],"extra":[{"text":"不能正确处理嵌套格式的问题仍然存在。"}]},{"text":"添加与RojExplorer(v447d以上版本)联合以进行歌单云保存的功能。","tag":["ADD"],"extra":[{"text":"RojExplorer v447d 可以在https://toxic2018.ml/697/下载到，但是此应用现在不再被维护，有安全问题请后果自负。"},{"text":"歌单本身仍然基于网址，因此歌曲数量限制仍然存在。"},{"text":"歌单本身技术结构未改变，这导致刷新歌单需要从RojExplorer重新打开，而非仅仅刷新页面。"},{"text":"该特性已经于 v126d 版本被移除。"}]}]},"v119b":{"version":"v119b","tag":[],"changes":[{"text":"改进编辑器界面。","tag":["CHANGE"],"extra":[{"text":"编辑器中的同类按钮现在被归类放置。"}]}]},"v119a":{"version":"v119a","tag":[],"changes":[{"text":"修正播放列表和批量下载文档绕过权限限制的漏洞。","tag":["FIX"]},{"text":"删除批量下载文档功能，改为下载歌词本。","tag":["ADD","BREAKING"],"extra":[{"text":"删除此功能是因为这会导致严重的性能问题。"},{"text":"歌词本会将所有歌词文档连接起来放于同一份文档中。"},{"text":"允许自定义封面标题和CIP数据。"}]},{"text":"界面优化","tag":["CHANGE"]}]},"v117a":{"version":"v117a","tag":["UNUSABLE"],"featured":"探索酷我音乐","changes":[{"text":"添加批量下载可打印文档功能。","tag":["ADD"],"extra":[{"text":"网页会一次性发起所有下载。如果存在失败，则不会重新发起。"}]},{"text":"优化“播放列表”功能（改为异步ajax，超时时间调整到15s）","tag":["FIX"]},{"text":"添加从酷我音乐搜索并播放的功能。（称为RemotePlay）","tag":["ADD"],"extra":[{"text":"抓取的歌曲可以被放入播放列表中。"},{"text":"播放列表中的歌曲在加载网页时被抓取，这导致加载一个含30首歌曲的RemotePlay需要近3分钟。"},{"text":"可以绕过下载客户端/付费的要求下载歌曲，这是无意的。这是因为下载与在线播放在技术上是等同的。"}]},{"text":"停止对Mac和iOS通用浏览器内核的支持","tag":["BREAKING"],"extra":[{"text":"这是因为作者改用安卓手机，无法继续测试iOS兼容性。"},{"text":"并不保证此后一定不支持。"}]}]},"v115c":{"version":"v115c","tag":["UNUSABLE"],"featured":"可连续播放的播放列表","changes":[{"text":"管理员登录入口不再显示在主页和“关于”对话框中。快速点击主页的黑色标题6次可以打开管理员登录入口。","tag":["CHANGE"]},{"text":"优化界面","tag":["CHANGE"]},{"text":"添加“播放列表”功能","tag":["ADD"],"extra":[{"text":"播放列表不能在网盘或此软件中存储。"},{"text":"每个播放列表拥有一个特定的网址。记下网址来收藏列表。"},{"text":"每次修改播放列表会造成网址改变。"},{"text":"手动编辑网址，向列表中加入不存在的歌曲会导致页面加载失败。相关代码会报错。"},{"text":"网址并不压缩，这导致创建的列表最多只能拥有约210首歌曲，并且较大的列表会明显降低浏览器性能。"},{"text":"使用“歌单构造器”创建。"},{"text":"(你知道吗) 当时使用播放列表功能可以绕过权限限制来加载歌曲的歌词等内容，然而并不可以播放。"}]}]},"v114c":{"version":"v114c","tag":[],"changes":[{"text":"添加伴奏与原声的切换","tag":["ADD"],"extra":[{"text":"伴奏需要另外上传"},{"text":"双击歌曲标题来触发。伴奏模式下，歌曲标题变为斜体。"}]}]},"v114b":{"version":"v114b","tag":[],"changes":[{"text":"添加自定义字体设置","tag":["ADD"],"extra":[{"text":"网页全局字体可以控制除歌词配置编辑器和查看器外的其他所有字体，但是当时这没有作用。"},{"text":"文档字体用于控制生成的Word文档的字体。"}]},{"text":"改变了“自动滚动”开关的位置","tag":["CHANGE"],"extra":[{"text":"现在变为歌词显示区左下角的正方形图标按钮。"},{"text":"现在在移动版下可用。"}]}]},"v114a":{"version":"v114a","tag":[],"featured":"应用程序得到整体化","changes":[{"text":"添加权限系统，用于限制非超级管理员用户的访问。","tag":["ADD"]},{"text":"添加主页。主页是所有歌曲的列表。","tag":["ADD"]}]},"v113a":{"version":"v113a","tag":[],"changes":[{"text":"添加管理界面删除歌曲的功能","tag":["ADD"],"extra":[{"text":"这需要通过将歌曲ID修改为“DELETE”来触发。"}]},{"text":"添加“插入秒”编辑功能","tag":["ADD"],"extra":[{"text":"点击后，编辑器光标处将插入当前预览中播放位置的秒数，并选中配置代码中下一个“__FTIME__”。"},{"text":"预览尚未加载或加载失败时此按钮无效，并且相关代码会报错。"}]},{"text":"在编辑器右半边底部添加预览","tag":["ADD"],"extra":[{"text":"预览实为引用了一个移动端播放页面"}]}]},"v110c":{"version":"v110c","tag":[],"changes":[{"text":"修正m4a等文件上传后无效的问题","tag":["FIX"],"extra":[{"text":"修正之前，m4a等文件只能通过服务器文件管理器上传。使用编辑器上传会成功上传文件，但是会因为服务端文件名错误而无效。"}]}]},"v110b":{"version":"v110b","tag":[],"changes":[{"text":"添加编辑器的一些功能","tag":["ADD"]},{"text":"管理面板与编辑器现在支持移动适配","tag":["FIX"]},{"text":"正式发布到Github","tag":["PUBLISH"]}]},"v110a":{"version":"v110a","tag":[],"changes":[{"text":"添加管理员的管理面板与编辑器","tag":["ADD"],"extra":[{"text":"暂时不支持移动适配"}]}]},"v107b":{"version":"v107b","tag":[],"featured":"变得能用了","changes":[{"text":"使用前缀表优化歌词切换","tag":["FIX","BREAKING"],"extra":[{"text":"每一刻中，系统只需查表两次找到要高亮的歌词，而非暴力寻找。"},{"text":"这使得歌曲的时长被限制在7200秒。如果歌曲时长超出该值，将会引发无法预料的错误。"},{"text":"事实上增大了内存用量（约 1.13MB），但是使得性能变得合理"}]},{"text":"前端处理时，歌词时值现在被乘10并当成整数处理。","tag":["FIX"],"extra":[{"text":"这是为了解决 Javascript 精度问题"}]},{"text":"软件不再被标记为 WIP（正在施工）。","tag":["FIX"]},{"text":"添加“关于”对话框的内容","tag":["ADD"],"extra":[{"text":"可以手动修改模板 common/about 来更改。"},{"text":"弊端是，软件更新时，对“关于”对话框的修改会丢失。"}]},{"text":"网页的页头现在可以当作返回按钮使用","tag":["ADD"],"extra":[{"text":"点击图标无效，需要点击到标题"},{"text":"标题未正确设置超链接格式，且不支持鼠标中键点击"},{"text":"在歌曲页面点击会返回播放页，在播放页点击则返回不存在的主页。"},{"text":"在不存在的页面点击始终会导向不存在的主页。"}]}]},"v107a":{"version":"v107a","tag":[],"changes":[{"text":"添加setting.php，允许设定软件名称等","tag":["ADD"],"extra":[{"text":"这使得软件不再有固定名称“TOXIC音乐播放器”"}]},{"text":"添加歌曲特定主体色功能","tag":["ADD"],"extra":[{"text":"通过在歌词代码文件中的[Info]段下指定 A 参数来设置。"},{"text":"仅支持十六进制颜色格式，前面可以带有“#”，也可以没有，这是无意的。"}]}]},"v105b":{"version":"v105b","tag":[],"changes":[{"text":"为所有页面添加了移动适配。","tag":["ADD"]},{"text":"修复访问不存在的页面时出现的白屏。","tag":["FIX"],"extra":[{"text":"(你知道吗) 这是因为功能导向代码在之前的开发中没有写完就被关闭了，但是因为巧合，这并没有引发错误。"}]}]},"v102a":{"version":"v102a","tag":[],"changes":[{"text":"现在可以使用 wap 询问参数来强制使用桌面版或移动版。","tag":["ADD"],"extra":[{"text":"参数可接受值：force-pc force-phone"},{"text":"在移动端使用桌面版时，网页会像未被声明为“移动端兼容”的情况下一样被缩小。这是为了防止功能异常。"},{"text":"特性供调试使用"}]},{"text":"添加[Reuse]和[Similar]段头标签","tag":["ADD"],"extra":[{"text":"这允许从其他段借用整段歌词文字，或仅仅借用其时值数据。"},{"text":"参见演示站中的 0106 号歌曲。"}]},{"text":"增大了歌词高亮、进度显示等工作的刻速度。从 1tps 变为 10tps。","tag":["FIX"]},{"text":"歌词切入时间现在可以精确到 0.1s。切入时间78.5s可以写作01-18.5、078.5或78.5等。","tag":["FIX"],"extra":[{"text":"这是为了解决较快的歌曲中出现的歌词时间严重误差。"}]}]},"v101a":{"version":"v101a","tag":[],"changes":[{"text":"添加移动适配，仅支持播放页面。","tag":["ADD"],"extra":[{"text":"移动适配的工作方式是根据客户端 UA 在页面上做小修补。"}]},{"text":"修复对Mac和iOS系统中通用浏览器内核的支持","tag":["FIX","BREAKING"],"extra":[{"text":"这些浏览器要求音频网址末尾有正确的后缀，如.mp3。"},{"text":"因此修改了音频输出网址的格式。从 (\\w+)/audio 变成了 (\\w+)/audio\\.(\\w+)。"}]},{"text":"添加了Word可打印文档生成器。","tag":["ADD"],"extra":[{"text":"生成的格式为分两栏打印，就像v126a中一样。"},{"text":"只能正常生成中括号格式代码表示的格式。"},{"text":"生成结果后缀为.xml，且只能使用WPS文字打开。"},{"text":"并非正确地基于Word中的XML组件生成。这意味着嵌套的中括号格式不会被正确处理。"},{"text":"仍有大量漏洞。"}]},{"text":"音频文件的加载进度会进度条中作为叠加层显示。","tag":["ADD"],"extra":[{"text":"并非只显示播放点处的加载进度，而是分块显示所有的。已加载部分颜色更暗。"}]},{"text":"添加中括号格式代码。","tag":["ADD"],"extra":[{"text":"仅有 U 和 S 两个，分别表示下划线和删除线。"}]}]},"v100a":{"version":"v100a","tag":[],"changes":[{"text":"初版。","tag":["INIT"],"extra":[{"text":"此版本包含歌曲播放页面、代码查看页与下载地址，但是不存在主页，试图访问主页会出现404错误。"}]}]}},"issues":[{"text":"计划 v127a-pre5 修复","tag":["MILESTONE"]},{"text":"计次需要随歌单和用户保存，且计次功能需要增强。","tag":["ISSUE"]},{"text":"计划 v127a 修复","tag":["MILESTONE"]},{"text":"需要显示酷我音乐给出的“相关推荐”信息。","tag":["ISSUE"]},{"text":"歌单“统计数据”功能未实现。","tag":["ISSUE"]},{"text":"歌单会自动移除不存在的项目而不告知用户。","tag":["ISSUE"]},{"text":"歌单编辑器需要虚拟键盘按钮以提醒用户/适配移动端。","tag":["ISSUE"]},{"text":"主页、歌曲管理和用户管理页需要筛选控件。","tag":["ISSUE"]},{"text":"下 次 一 定","tag":["MILESTONE"]},{"text":"需要逐字配时与掌握程度测试功能。","tag":["ISSUE"]},{"text":"需要拼音标注机制，但不能破坏 RemotePlay。","tag":["ISSUE"]},{"text":"需要完善的 API。","tag":["ISSUE"]},{"text":"需要切换音质的机制。","tag":["ISSUE"],"extra":[{"text":"可以分为 aac(半损), m4a(标准), 128kmp3(标准), 192kmp3(高品), 320kmp3(超品), flac(无损), wav(无损)。"}]},{"text":"有的系统配置是多余的。configuration.php 应该被语言文件取代。","tag":["ISSUE"]},{"text":"移动端在加载音频时“消极怠工”。","tag":["ISSUE"]},{"text":"需要使用户设置与用户系统同步。","tag":["ISSUE"]},{"text":"需要 RemotePlay 预加载机制以防止大歌单初始化时间过长。","tag":["ISSUE"]},{"text":"需要可编程化的歌单切换规则。","tag":["ISSUE"]},{"text":"页面上的功能过于零碎。","tag":["ISSUE"]}]}